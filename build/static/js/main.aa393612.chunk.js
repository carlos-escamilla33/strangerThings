(this.webpackJsonpstrangerthings=this.webpackJsonpstrangerthings||[]).push([[0],{25:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var s=n(3),r=n(1),c=n(17),a=n.n(c),i=n(4),o=n(5),l=(n(23),n(2)),u=n.n(l),j=n(7),b="https://strangers-things.herokuapp.com/api/".concat("2105-SJS-RM-WEB-PT","/"),d=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,s,r,c,a,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,s=t.method,r=t.token,c=t.body,e.prev=1,a={method:s?s.toUpperCase():"GET",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)},r&&(a.headers.Authorization="Bearer ".concat(r)),e.next=6,fetch("".concat(b).concat(n),a);case 6:return i=e.sent,e.next=9,i.json();case 9:if(!(o=e.sent).error){e.next=12;break}throw o.error;case 12:return e.abrupt("return",o);case 15:e.prev=15,e.t0=e.catch(1),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),h=(n(25),n(0)),p=function(e){var t=e.setToken,n=e.setUser,c=Object(r.useState)(""),a=Object(s.a)(c,2),l=a[0],b=a[1],p=Object(r.useState)(""),O=Object(s.a)(p,2),m=O[0],x=O[1],g=Object(i.f)(),f=function(){var e=Object(j.a)(u.a.mark((function e(){var s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d({url:"/users/login/",method:"POST",body:{user:{username:l,password:m}}});case 3:(s=e.sent)&&(t(s.data.token),n(l),s.data.token&&g.push("/")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("nav",{className:"navbar navbar-dark bg-dark",children:Object(h.jsx)("div",{children:Object(h.jsx)("h1",{className:"text-white navTitle",children:"Stranger Things"})})}),Object(h.jsxs)("form",{className:"loginForm container",onSubmit:function(e){e.preventDefault(),f(),b(""),x("")},children:[Object(h.jsx)("h2",{className:"centerLogin loginTitle",children:"Login"}),Object(h.jsx)("div",{className:"centerLogin",children:Object(h.jsx)("input",{className:"loginInput",placeholder:" Username",value:l,onChange:function(e){b(e.target.value)},minLength:"8",type:"text",required:!0})}),Object(h.jsx)("div",{className:"centerLogin",children:Object(h.jsx)("input",{className:"loginInput",placeholder:" Password",value:m,onChange:function(e){x(e.target.value)},minLength:"8",type:"password",required:!0})}),Object(h.jsx)("div",{className:"centerLogin",children:Object(h.jsx)("button",{type:"submit",className:"btn btnStyle btn-lg btn-primary",children:"Login"})}),Object(h.jsx)("div",{className:"centerLogin",children:Object(h.jsx)(o.b,{to:"/posts",children:Object(h.jsx)("button",{type:"button",className:"btn btnStyle btn-lg btn-primary",children:"Skip"})})}),Object(h.jsx)("hr",{}),Object(h.jsx)("div",{className:"centerLogin",children:Object(h.jsx)(o.b,{to:"/users/register",children:Object(h.jsx)("button",{type:"button",className:"btn btnStyle color btn-lg btn-success",children:"Create New Account"})})})]})]})},O=function(e){var t=e.token,n=e.setToken,s={color:"white",textDecoration:"none"};return Object(h.jsx)(h.Fragment,{children:t?Object(h.jsxs)("nav",{className:"navbar d-flex justify-content-around navbar-dark bg-dark",children:[Object(h.jsx)(o.b,{style:s,to:"/",children:Object(h.jsx)("h1",{children:"Stranger Things"})}),Object(h.jsx)(o.b,{style:s,to:"/",children:Object(h.jsx)("h4",{className:"navbar-item",children:"Home"})}),Object(h.jsx)(o.b,{style:s,to:"/posts",children:Object(h.jsx)("h4",{className:"navbar-item",children:"Posts"})}),Object(h.jsx)(o.b,{style:s,to:"/profile",children:Object(h.jsx)("h4",{className:"navbar-item",children:"Profile"})}),Object(h.jsx)(o.b,{style:s,className:"navbar-item",to:"/users/login",children:Object(h.jsx)("button",{onClick:function(){n("")},className:"btn btn-dark",children:Object(h.jsx)("h4",{children:"Logout"})})})]}):null})},m=(n(35),function(e){var t=e.token,n=e.postId,c=e.author,a=e.user,i=Object(r.useState)(""),o=Object(s.a)(i,2),l=o[0],b=o[1],p=function(){var e=Object(j.a)(u.a.mark((function e(n){var s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d({url:"/posts/".concat(n,"/messages"),method:"POST",token:t,body:{message:{content:l}}});case 3:return s=e.sent,e.abrupt("return",s);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return t&&c!==a?Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),p(n),b("")},children:[Object(h.jsx)("div",{className:"form-group",children:Object(h.jsx)("textarea",{className:"form-control",placeholder:" send message to ".concat(c),value:l,onChange:function(e){b(e.target.value)}})}),l.length>1?Object(h.jsx)("button",{className:"btn btn-lg btn-success send",children:"send message"}):null]}):null}),x=(n(36),function(e){var t=e.posts,n=e.user,c=e.deleteHandler,a=e.token,i=Object(r.useState)(""),o=Object(s.a)(i,2),l=o[0],u=o[1],j=t.filter((function(e){return function(e,t){return e.includes(t)}(e.title.toLowerCase(),l)})),b=l.length?j:t;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("hr",{}),Object(h.jsx)("form",{className:"container centerSearchBar spacing",children:Object(h.jsx)("input",{onChange:function(e){u(e.target.value)},value:l.toLowerCase(),className:"searchInput",placeholder:" search post"})}),b.map((function(e){return Object(h.jsxs)("div",{className:"card text-center spacing",children:[Object(h.jsx)("div",{className:"card-header",children:Object(h.jsx)("h3",{children:e.title})}),Object(h.jsxs)("div",{className:"card-body",children:[Object(h.jsxs)("h5",{className:"display-6",children:["Price: ",e.price]}),Object(h.jsxs)("h5",{className:"display-6",children:["Location: ",e.location]}),Object(h.jsxs)("p",{className:"lead",children:[" Seller: ",e.author.username]}),Object(h.jsxs)("p",{className:"lead",children:[" Description: ",e.description]}),a&&e.author.username===n?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("button",{type:"submit",onClick:function(){return c(e._id)},className:"btn btn btn-danger delete",children:"Delete"})}):null,Object(h.jsx)(m,{postId:e._id,token:a,author:e.author.username,user:n})]})]},e._id)}))]})}),g=(n(37),function(e){var t=e.token,n=e.user,s=e.setPosts,c=e.posts,a=function(){var e=Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d({url:"/posts"});case 3:t=e.sent,s(t.data.posts),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(j.a)(u.a.mark((function e(n){var s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d({url:"/posts/".concat(n),method:"DELETE",token:t});case 3:return s=e.sent,e.next=6,a();case 6:return e.abrupt("return",s);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){a()}),[]),Object(h.jsxs)(h.Fragment,{children:[t?Object(h.jsx)(O,{}):Object(h.jsx)("nav",{className:"navbar navbar-dark bg-dark",children:Object(h.jsxs)("div",{className:"nonUserNav",children:[Object(h.jsx)(o.b,{to:"/users/login",children:Object(h.jsx)("button",{type:"button",className:"btn btn-primary loginRegisterBtn",children:"Login / Register"})}),Object(h.jsx)("h1",{className:"text-white nonUserTitle",children:"Stranger Things"})]})}),Object(h.jsx)("div",{className:"container centerTitle",children:t?Object(h.jsx)("h3",{className:"display-5",children:"Post a listing or search for one!"}):Object(h.jsx)("h3",{className:"display-6",children:"Login / Register to add a listing!"})}),t?Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("form",{className:"postsForm",children:Object(h.jsx)(o.b,{to:"/users/posts/add",children:Object(h.jsx)("button",{type:"submit",className:"btn btn-lg btn-primary add",children:"Add Post"})})})}):null,Object(h.jsx)(x,{posts:c,deleteHandler:i,user:n,token:t})]})}),f=(n(38),function(e){var t=e.setToken,n=Object(i.f)(),c=Object(r.useState)(""),a=Object(s.a)(c,2),o=a[0],l=a[1],b=Object(r.useState)(""),p=Object(s.a)(b,2),O=p[0],m=p[1],x=function(){var e=Object(j.a)(u.a.mark((function e(){var s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d({url:"/users/register/",method:"POST",body:{user:{username:o,password:O}}});case 3:(s=e.sent)&&(t(s.data.token),s.data.token&&(t(""),n.push("/users/login"))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("nav",{className:"navbar navbar-dark bg-dark",children:Object(h.jsxs)("div",{className:"registerNav",children:[Object(h.jsx)("button",{type:"button",className:"btn btn-primary backBtn",onClick:function(){return n.goBack()},children:"Back"}),Object(h.jsx)("h1",{className:"text-white strangerTitle",children:"Stranger Things"})]})}),Object(h.jsxs)("form",{className:"container registerForm",onSubmit:function(e){e.preventDefault(),x(),l(""),m("")},children:[Object(h.jsx)("h2",{className:"centerRegister registerBtnTitle",children:"Register"}),Object(h.jsx)("p",{className:"centerRegister",children:"Create your account. It's free and only takes a minute."}),Object(h.jsx)("div",{className:"centerRegister",children:Object(h.jsx)("input",{className:"inputRegister",placeholder:" Username",value:o,onChange:function(e){l(e.target.value)},minLength:"8",type:"text",required:!0})}),Object(h.jsx)("div",{className:"centerRegister",children:Object(h.jsx)("input",{className:"inputRegister",placeholder:" Password",value:O,onChange:function(e){m(e.target.value)},minLength:"8",type:"password",required:!0})}),Object(h.jsx)("div",{className:"centerRegister",children:Object(h.jsx)("button",{type:"submit",className:"btn btn-lg btn-success registerBtn",children:"Register"})})]})]})}),v=(n(39),function(e){var t=Object(i.f)(),n=e.user,s=e.token;return Object(h.jsx)(h.Fragment,{children:n.length>1&&s?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(O,{}),Object(h.jsxs)("div",{className:"container home text-center",children:[Object(h.jsx)("h1",{className:"display-1",children:"Welcome to Stranger Things"}),Object(h.jsxs)("h2",{className:"lead",children:["You are logged in as ",n]}),Object(h.jsx)(o.b,{to:"/profile",children:Object(h.jsx)("button",{type:"submit",className:"btn btn-lg btn-outline-primary",children:"View Profile"})})]})]}):t.push("/users/login")})}),N=(n(40),function(e){var t=e.token,n=e.user,c=Object(r.useState)([]),a=Object(s.a)(c,2),i=(a[0],a[1]),o=Object(r.useState)([]),l=Object(s.a)(o,2),b=l[0],p=l[1],O=function(){var e=Object(j.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d({url:"/users/me",token:t});case 3:n=e.sent,i(n.data.posts),p(n.data.messages),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){O()}),[]),0!==b.length?Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)("h1",{className:"text-center display-3",children:"messages recieved:"}),b.map((function(e){return e.fromUser.username!==n?Object(h.jsxs)("div",{className:"card text-center border-danger postSpacing",children:[Object(h.jsxs)("h2",{className:"card-header",children:["from: ",e.fromUser.username]}),Object(h.jsx)("div",{className:"card-body",children:Object(h.jsxs)("blockquote",{className:"blockquote mb-0",children:[Object(h.jsxs)("p",{children:["Your Listing: ",e.post.title]}),Object(h.jsxs)("p",{children:["Content: ",e.content]})]})})]},e._id):null})),Object(h.jsx)("h1",{className:"text-center display-3",children:"messages sent:"}),b.map((function(e){return e.fromUser.username!==n?Object(h.jsxs)("div",{className:"card text-center border-primary postSpacing",children:[Object(h.jsx)("h2",{className:"card-header",children:"(sent by me)"}),Object(h.jsx)("div",{className:"card-body",children:Object(h.jsxs)("blockquote",{className:"blockquote mb-0",children:[Object(h.jsx)("p",{children:e.post.title}),Object(h.jsxs)("p",{children:["Content: ",e.content]})]})})]},e._id):null}))]}):Object(h.jsx)("h2",{className:"display-1 container",children:"No user data yet..."})}),k=(n(41),function(e){var t=e.token,n=e.setPosts,c=Object(i.f)(),a=Object(r.useState)(""),o=Object(s.a)(a,2),l=o[0],b=o[1],p=Object(r.useState)(""),O=Object(s.a)(p,2),m=O[0],x=O[1],g=Object(r.useState)(""),f=Object(s.a)(g,2),v=f[0],N=f[1],k=Object(r.useState)(""),y=Object(s.a)(k,2),S=y[0],w=y[1],P=function(){var e=Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d({url:"/posts"});case 3:t=e.sent,n(t.data.posts),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(j.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d({url:"/posts",method:"POST",token:t,body:{post:{title:l,description:m,price:v,location:S}}});case 3:return n=e.sent,e.next=6,P();case 6:return e.abrupt("return",n);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){P()}),[]);return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("form",{className:"container userPostsForm",onSubmit:function(e){e.preventDefault(),P(),T(),c.push("/posts")},children:[Object(h.jsx)("h2",{className:"centerUserPost",children:"Tell us what you're selling"}),Object(h.jsx)("div",{className:"centerUserPost",children:Object(h.jsx)("input",{className:"userPostsInput",placeholder:" Title",value:l,onChange:function(e){b(e.target.value)}})}),Object(h.jsx)("div",{className:"centerUserPost",children:Object(h.jsx)("input",{className:"userPostsInput",placeholder:" Description",value:m,onChange:function(e){x(e.target.value)}})}),Object(h.jsx)("div",{className:"centerUserPost",children:Object(h.jsx)("input",{className:"userPostsInput",placeholder:" Price",value:v,onChange:function(e){N(e.target.value)}})}),Object(h.jsx)("div",{className:"centerUserPost",children:Object(h.jsx)("input",{className:"userPostsInput",placeholder:" Location",value:S,onChange:function(e){w(e.target.value)}})}),Object(h.jsx)("div",{className:"centerUserPost",children:Object(h.jsx)("button",{className:"btn btn-lg btn-primary listingBtn",children:"Create Listing"})})]})})}),y=function(){var e=Object(r.useState)(""),t=Object(s.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),o=Object(s.a)(a,2),l=o[0],u=o[1],j=Object(r.useState)([]),b=Object(s.a)(j,2),d=b[0],m=b[1];return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(O,{setToken:c,token:n}),Object(h.jsxs)(i.c,{children:[Object(h.jsx)(i.a,{exact:!0,path:"/",children:Object(h.jsx)(v,{user:l,token:n})}),Object(h.jsx)(i.a,{exact:!0,path:"/users/login",children:Object(h.jsx)(p,{setToken:c,setUser:u})}),Object(h.jsx)(i.a,{path:"/posts",children:Object(h.jsx)(g,{token:n,user:l,posts:d,setPosts:m})}),Object(h.jsx)(i.a,{path:"/users/register",children:Object(h.jsx)(f,{setToken:c})}),Object(h.jsx)(i.a,{path:"/profile",children:Object(h.jsx)(N,{token:n,user:l})}),Object(h.jsx)(i.a,{path:"/users/posts/add",children:Object(h.jsx)(k,{token:n,setPosts:m})})]})]})};a.a.render(Object(h.jsx)(o.a,{children:Object(h.jsx)(y,{})}),document.getElementById("app"))}},[[42,1,2]]]);
//# sourceMappingURL=main.aa393612.chunk.js.map